<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="proj.css">
    <title>TODO Web Application</title>
    <script>
          var task=[];
          var tas=JSON.stringify(task);
          function emails()
          {
              var em = window.prompt("Enter your mail id: ")
              console.log(em);
              fetch("https://easymail.p.rapidapi.com/send", {
	"method": "POST",
	"headers": {
		"content-type": "application/json",
		"x-rapidapi-host": "easymail.p.rapidapi.com",
		"x-rapidapi-key": "721bd46ec5msh1895563b314a99cp14eeecjsn9260f8ff52a3"
	},
	"body": {
		"from": {
			"name": "Web Application"
		},
		"to": {
			"name": "User",
			"address": em
		},
		"subject": "Your Tasks",
		"message": tas,
		"show_noreply_warning": true
	}
})
.then(response => {
	console.log(response);
})
.catch(err => {
	console.error(err);
});
          }
          function func(){
          var serial = document.getElementById('tasks').rows.length;
          var status="Pending";
          var tab = document.getElementById('tasks');
          var r = tab.insertRow();
          var c1 = r.insertCell();
          var c2 = r.insertCell();
          var c3 = r.insertCell();
          var c4 = r.insertCell();
          var time = Date();
          var name = document.getElementById('task').value;
          c1.innerHTML = serial;
          c2.innerHTML = name;
          c3.innerHTML = status;
          c4.innerHTML = time;
          var t = {
              "serial no" : serial,
              "name":name,
              "status":status,
              "time":time
          }
          task.push(t);
          name.value="";
          document.reset();
          console.log(JSON.stringify(task));
          }
          
    </script>
</head>
<body>
     <h1 class="head">Todo Application Manager &#x2705;</h1>
     <table cellspacing="4" cellpadding="4">
         <tr>
             <td id="her">Enter the name of the Task :  </td>
             <td>
                <input type="text" name="tasks" id="task">
             </td>
             <td>
             <Button id="btn" onclick="func()">Add Me</Button>
            </td>
         </tr>
     </table>
     <br>
     <br>
     <br>
     <table border="0" cellspacing="9" cellpadding="10" id="tasks">
        <tr class="type">
          <td><b>Serial Number</b></td>
          <td><b>Name of the Task</b></td>
          <td><b>Status of Task</b></td>
          <td><b>Time Assigned</b></td>
        </tr>
      </table>
      <br><br><br>
      <center><button type=submit onclick="window.print()" id="btn">Print this page</button></center><br>
      <center><Button id="btn" onclick="emails()">Send email</Button></center>      
      <br><br><br><br><br><br>
      <hr>
      <center>MADE BY YELAGANDULA SAI TEJA</center>
</body>
</html>